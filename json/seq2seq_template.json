{
  "dataset_reader":{
    "type":"seq2seq",
    "source_tokenizer":{
      "type":"word",
      "word_splitter":{
        "type":"just_spaces"
      }
    },
    "target_tokenizer":{
      "type":"word",
      "word_splitter":{
        "type":"just_spaces"
      }
    },
    "source_token_indexers":{
      "tokens":{
        "type":"single_id",
		"lowercase_tokens":true,
        "namespace":"source_tokens"
      },
      "token_characters":{
        "type":"characters"
      }
    },
    "target_token_indexers":{
      "tokens":{
		"type":"single_id",
        "namespace":"target_tags"
      }
    },
    "source_add_start_token":false
  },
  "train_data_path":"./dataset/seq2seq/train/ner_conll03_train.txt",
  "validation_data_path":"./dataset/seq2seq/dev/ner_conll03_dev.txt",
  "test_data_path":"./dataset/seq2seq/test/ner_conll03_test.txt",
  "evaluate_on_test":true,
  "model":{
    "type":"simple_seq2seq",
    "source_embedder":{
      "tokens":{
        "type":"embedding",
        "vocab_namespace":"source_tokens",
        "embedding_dim":100,
        "pretrained_file":"https://s3-us-west-2.amazonaws.com/allennlp/datasets/glove/glove.6B.100d.txt.gz",
        "trainable":true,
		"scale_grad_by_freq":false
      },
      "token_characters":{
        "type":"character_encoding",
        "embedding":{
          "embedding_dim":8
        },
        "encoder":{
          "type":"cnn",
          "embedding_dim":8,
          "num_filters":50,
          "ngram_filter_sizes":[
            5
          ]
        },
        "dropout":0.2
      }
    },
    "encoder":{
      "type":"lstm",
      "input_size":150,
      "hidden_size":100,
      "num_layers":2,
      "dropout":0.5,
      "bidirectional":true
    },
	"initializer":[
      [
		"_encoder._module.weight*",
		{
		  "type":"xavier_uniform"
		}
	  ],
	  [
		"_decoder_cell.weight*",
		{
		  "type":"xavier_uniform"
		}
	  ],
	  [
		"_output_projection_layer.weight",
		{
		  "type":"xavier_uniform"
		}
	  ],
	  [
		".*.token_embedder_token_characters._encoder.*.weight",
		{
		  "type":"xavier_uniform"
		}
	  ],	  
      [
		".*.*bias",
		{
		  "type":"constant",
		  "val":0
		}
	  ]
	],	  
    "max_decoding_steps":100,
    "target_namespace":"target_tags",
    "target_embedding_dim":100,
    "attention_function":{
      "type":"dot_product"
    },
    "scheduled_sampling_ratio":0.2
  },
  "iterator":{
    "type":"bucket",
    "padding_noise":0.0,
    "batch_size":10,
    "sorting_keys":[
      [
        "source_tokens",
        "num_tokens"
      ]
    ]
  },
  "trainer":{
    "num_epochs":100,
    "patience":10,
    "cuda_device":1,
    "optimizer":{
      "type":"sgd",
	  "lr":0.015,
	  "momentum":0.9
    },
    "learning_rate_scheduler":{
      "type":"reduce_on_plateau",
      "factor":0.5,
      "mode":"max",
      "patience":5
    },
    "grad_clipping":5.0,
    "validation_metric":"+f1-measure-overall"
  }
}